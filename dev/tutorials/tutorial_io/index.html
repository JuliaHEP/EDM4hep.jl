<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>EDM4hep.jl EDM I/O Tutorial · EDM4hep.jl</title><meta name="title" content="EDM4hep.jl EDM I/O Tutorial · EDM4hep.jl"/><meta property="og:title" content="EDM4hep.jl EDM I/O Tutorial · EDM4hep.jl"/><meta property="twitter:title" content="EDM4hep.jl EDM I/O Tutorial · EDM4hep.jl"/><meta name="description" content="Documentation for EDM4hep.jl."/><meta property="og:description" content="Documentation for EDM4hep.jl."/><meta property="twitter:description" content="Documentation for EDM4hep.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">EDM4hep.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../api/">Public APIs</a></li><li><a class="tocitem" href="../../release_notes/">Release Notes</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorial_edm/">EDM4hep.jl EDM Tutorial</a></li><li class="is-active"><a class="tocitem" href>EDM4hep.jl EDM I/O Tutorial</a><ul class="internal"><li><a class="tocitem" href="#Reading-an-EDM4hep-file"><span>Reading an EDM4hep file</span></a></li></ul></li></ul></li><li><span class="tocitem">Examples</span><ul><li><input class="collapse-toggle" id="menuitem-5-1" type="checkbox"/><label class="tocitem" for="menuitem-5-1"><span class="docs-label">FCC</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/analysis_mH_recoil/">FCCee Analysis Examples</a></li><li><a class="tocitem" href="../../examples/analysis_mH_recoil-MT/">FCCee Analysis Examples (MT)</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">EIC</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/ePIC_simulation/">Working with ePIC Simulation Output</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>EDM4hep.jl EDM I/O Tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>EDM4hep.jl EDM I/O Tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaHEP/EDM4hep.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaHEP/EDM4hep.jl/blob/main/docs/src/tutorials/tutorial_io.lit#L" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="EDM4hep.jl-EDM-I/O-Tutorial"><a class="docs-heading-anchor" href="#EDM4hep.jl-EDM-I/O-Tutorial">EDM4hep.jl EDM I/O Tutorial</a><a id="EDM4hep.jl-EDM-I/O-Tutorial-1"></a><a class="docs-heading-anchor-permalink" href="#EDM4hep.jl-EDM-I/O-Tutorial" title="Permalink"></a></h1><p>This tutorial shows how to read EDM4hep data files and perform some simple analysis</p><div class="admonition is-info" id="Note-that-4ed74fb6ca81f051"><header class="admonition-header">Note that<a class="admonition-anchor" href="#Note-that-4ed74fb6ca81f051" title="Permalink"></a></header><div class="admonition-body"><p>You can also download this tutorial as a <a href="../tutorial_io.ipynb">Jupyter notebook</a> and a plain <a href="../tutorial_io.jl">Julia source file</a>.</p></div></div><h4 id="Table-of-contents"><a class="docs-heading-anchor" href="#Table-of-contents">Table of contents</a><a id="Table-of-contents-1"></a><a class="docs-heading-anchor-permalink" href="#Table-of-contents" title="Permalink"></a></h4><ul><li><a href="#Reading-an-EDM4hep-file">Reading an EDM4hep file</a></li><li class="no-marker"><ul><li><a href="#Accessing-the-events">Accessing the events</a></li><li><a href="#Accessing-the-collections">Accessing the collections</a></li><li><a href="#Drawing-the-EDMM4hep-data">Drawing the EDMM4hep data</a></li></ul></li></ul><h4 id="Loading-the-necessary-modules"><a class="docs-heading-anchor" href="#Loading-the-necessary-modules">Loading the necessary modules</a><a id="Loading-the-necessary-modules-1"></a><a class="docs-heading-anchor-permalink" href="#Loading-the-necessary-modules" title="Permalink"></a></h4><ul><li>We will use the <code>EDM4hep</code> module that defines all the EDM4hep types and its relations and links.</li><li>We will use the <a href="https://juliaphysics.github.io/FHist.jl/stable/"><code>FHist</code></a> module to create histograms</li><li>We will use the <a href="https://docs.juliaplots.org/stable/"><code>Plots</code></a> module to plot the histograms</li></ul><p>If these modules are not installed, you can install them by running the following commands:</p><pre><code class="language-julia hljs">using Pkg
Pkg.add(&quot;EDM4hep&quot;)
Pkg.add(&quot;FHist&quot;)
Pkg.add(&quot;Plots&quot;)</code></pre><pre><code class="language-julia hljs">using EDM4hep
using EDM4hep.RootIO
using Base.Iterators: partition, take
using FHist
using Plots: plot, scatter, plot!, theme</code></pre><h2 id="Reading-an-EDM4hep-file"><a class="docs-heading-anchor" href="#Reading-an-EDM4hep-file">Reading an EDM4hep file</a><a id="Reading-an-EDM4hep-file-1"></a><a class="docs-heading-anchor-permalink" href="#Reading-an-EDM4hep-file" title="Permalink"></a></h2><p>We will read an EDM4hep file with the <code>RootIO.Reader</code> function. This function returns a reader object that can be used to access the events in the file. The input file is a ROOT file with the EDM4hep data model and is located to the path <code>ttbar_edm4hep_digi.root</code>.</p><pre><code class="language-julia hljs">finput = joinpath(@__DIR__,&quot;../../examples&quot; ,&quot;ttbar_edm4hep_digi.root&quot;)</code></pre><pre><code class="nohighlight hljs">&quot;/Users/mato/Development/EDM4hep.jl/docs/src/tutorials/../../examples/ttbar_edm4hep_digi.root&quot;</code></pre><p>We create a reader object to access the events in the file. The object displays a summary table of the content of the file.</p><pre><code class="language-julia hljs">reader = RootIO.Reader(finput)</code></pre><pre><code class="nohighlight hljs">

ERROR: SystemError: opening file /Users/mato/Development/EDM4hep.jl/docs/src/tutorials/../../examples/ttbar_edm4hep_digi.root: No such file or directory</code></pre><h3 id="Accessing-the-events"><a class="docs-heading-anchor" href="#Accessing-the-events">Accessing the events</a><a id="Accessing-the-events-1"></a><a class="docs-heading-anchor-permalink" href="#Accessing-the-events" title="Permalink"></a></h3><p>The <code>TTree</code> called <code>events</code> contains the events in the file. We can access the events by using the <code>RootIO.get</code> function with the reader object and the name of the <code>TTree</code>.</p><pre><code class="language-julia hljs">events = RootIO.get(reader, &quot;events&quot;);</code></pre><pre><code class="nohighlight hljs">

ERROR: UndefVarError: `reader` not defined in `Main.var&quot;##277&quot;`
Suggestion: add an appropriate import or assignment. This global was declared but not assigned.</code></pre><div class="admonition is-info" id="Note-that-f9e98f8c0887a78f"><header class="admonition-header">Note that<a class="admonition-anchor" href="#Note-that-f9e98f8c0887a78f" title="Permalink"></a></header><div class="admonition-body"><p>If you get warnings is because there is a mismatch between the current schema version of EDM4hep and version when the file was written. The default behavior is ignore old types and set to zero the attributes that do not exists in the file.</p></div></div><p>We can access the first event in the file by using the index <code>1</code> in the <code>events</code> array.</p><pre><code class="language-julia hljs">evt = events[1];</code></pre><pre><code class="nohighlight hljs">

ERROR: UndefVarError: `events` not defined in `Main.var&quot;##277&quot;`
Suggestion: add an appropriate import or assignment. This global was declared but not assigned.</code></pre><p>the <code>evt</code> object is a <code>UnROOT.LazyEvent</code>. Each leaf (column) can be accessed directlyt if you know the name of the leaf. Typically the name is of the form <code>&lt;collection_name&gt;_&lt;field_name&gt;</code>. The full list of names can be obtained by calling the <code>names</code> function on the <code>events</code> object. For example:</p><pre><code class="language-julia hljs">for n in names(events) |&gt; sort!
    startswith(n, &quot;ECalBarrelCollection&quot;) &amp;&amp; println(n)
end</code></pre><pre><code class="nohighlight hljs">

ERROR: UndefVarError: `events` not defined in `Main.var&quot;##277&quot;`
Suggestion: add an appropriate import or assignment. This global was declared but not assigned.</code></pre><div class="admonition is-info" id="Note-that-4e92ff0692cc47e5"><header class="admonition-header">Note that<a class="admonition-anchor" href="#Note-that-4e92ff0692cc47e5" title="Permalink"></a></header><div class="admonition-body"><p>There is not need to access individual columns like this. The <code>RootIO.get</code> function can be used to access the collections directly.</p></div></div><h3 id="Accessing-the-collections"><a class="docs-heading-anchor" href="#Accessing-the-collections">Accessing the collections</a><a id="Accessing-the-collections-1"></a><a class="docs-heading-anchor-permalink" href="#Accessing-the-collections" title="Permalink"></a></h3><p>The available collections in the event can be obtained by displaying the reader object.</p><pre><code class="language-julia hljs">show(reader)</code></pre><pre><code class="nohighlight hljs">

ERROR: UndefVarError: `reader` not defined in `Main.var&quot;##277&quot;`
Suggestion: add an appropriate import or assignment. This global was declared but not assigned.</code></pre><p>The <code>RootIO.get</code> function can be used to access the collections in the event. The function takes the reader object, the event object and the name of the collection as arguments.</p><pre><code class="language-julia hljs">calo = RootIO.get(reader, evt, &quot;AllCaloHitContributionsCombined&quot;);
hits = RootIO.get(reader, evt, &quot;ECalBarrelCollection&quot;);
mcps = RootIO.get(reader, evt, &quot;MCParticle&quot;);</code></pre><pre><code class="nohighlight hljs">

ERROR: UndefVarError: `reader` not defined in `Main.var&quot;##277&quot;`
Suggestion: add an appropriate import or assignment. This global was declared but not assigned.</code></pre><div class="admonition is-info" id="Note-that-9303a5ba0d5b56f5"><header class="admonition-header">Note that<a class="admonition-anchor" href="#Note-that-9303a5ba0d5b56f5" title="Permalink"></a></header><div class="admonition-body"><p>Relationships will automatically be setup if the related collections will be also be accessed. For example, in this case the relation of <code>SimCalorimeterHit</code>s from the collection <code>ECalBarrelCollection</code> to <code>CaloHitContribution</code>s from <code>AllCaloHitContributionsCombined</code> will be filled.</p></div></div><p>The <code>calo</code> object is a <code>EDM4hep.EDCollection</code> object that contains the calorimeter hit contributions. The <code>hits</code> object is a <code>EDM4hep.EDCollection</code> object that contains the hits in the ECal barrel. The <code>mcps</code> object is a <code>EDM4hep.EDCollection</code> object that contains the MCParticles.</p><p>We can now print some information about the collections.</p><pre><code class="language-julia hljs">for hit in take(hits, 20)
    println(&quot;ECAL Hit $(hit.index) has energy $(hit.energy) at position $(hit.position) with $(length(hit.contributions)) contributions&quot;)
end</code></pre><pre><code class="nohighlight hljs">

ERROR: UndefVarError: `hits` not defined in `Main.var&quot;##277&quot;`
Suggestion: check for spelling errors or missing imports.</code></pre><p>Lets check whether the total energy in the hits is the same as the sum of all the calorimeter contributions. This an example to show the expressivity of the Julia language. We can construct a <code>StructArray</code> with all the related hit contributions and use the <code>sum</code> function to sum the energy of all the contributions as a column of the constructed SoA.</p><pre><code class="language-julia hljs">for hit in hits
    StructArray(hit.contributions).energy |&gt; sum |&gt; c -&gt; c ≈ hit.energy || println(&quot;Hit $(hit.index) has energy $(hit.energy) and contributions $(c)&quot;)
end</code></pre><pre><code class="nohighlight hljs">

ERROR: UndefVarError: `hits` not defined in `Main.var&quot;##277&quot;`
Suggestion: check for spelling errors or missing imports.</code></pre><h3 id="Drawing-the-EDMM4hep-data"><a class="docs-heading-anchor" href="#Drawing-the-EDMM4hep-data">Drawing the EDMM4hep data</a><a id="Drawing-the-EDMM4hep-data-1"></a><a class="docs-heading-anchor-permalink" href="#Drawing-the-EDMM4hep-data" title="Permalink"></a></h3><p>The following shows how easy is to draw EDM4hep event using the <code>Plots</code> module. In this example we want to plot the calorimeter hits in the space with dots with the size proportional to the energy of the hit.</p><pre><code class="language-julia hljs">maxE = hits.energy |&gt; maximum
scatter(hits.position.x, hits.position.y, hits.position.z,
        markersize = (hits.energy/maxE)*10, color = :blue)</code></pre><pre><code class="nohighlight hljs">

ERROR: UndefVarError: `hits` not defined in `Main.var&quot;##277&quot;`
Suggestion: check for spelling errors or missing imports.</code></pre><p>The projection in the X-Y plane is shown below.</p><pre><code class="language-julia hljs">scatter(hits.position.x, hits.position.y, markersize = (hits.energy/maxE)*10, color = :blue)</code></pre><pre><code class="nohighlight hljs">

ERROR: UndefVarError: `hits` not defined in `Main.var&quot;##277&quot;`
Suggestion: check for spelling errors or missing imports.</code></pre><p>Accessing the <code>hit</code> attributes as columns of the <code>hits</code> object is very efficient. Lets verify it. Using the <code>@btime</code> macro from the <code>BenchmarkTools</code> module we can measure the time to access the <code>energy</code> column.</p><pre><code class="language-julia hljs">using BenchmarkTools
@benchmark hits.energy |&gt; maximum</code></pre><pre><code class="nohighlight hljs">

ERROR: ArgumentError: Package BenchmarkTools not found in current path.
- Run `import Pkg; Pkg.add(&quot;BenchmarkTools&quot;)` to install the BenchmarkTools package.</code></pre><p>The time to access the <code>energy</code> column is very small.</p><pre><code class="language-julia hljs">@benchmark begin
    _max = 0.0f0
    for h in hits
        _max = max(_max, h.energy)
    end
    _max
end</code></pre><pre><code class="nohighlight hljs">

ERROR: LoadError: UndefVarError: `@benchmark` not defined in `Main.var&quot;##277&quot;`
Suggestion: check for spelling errors or missing imports.
in expression starting at /Users/mato/Development/EDM4hep.jl/docs/src/tutorials/tutorial_io.md:1</code></pre><p>The time to access the <code>energy</code> column using a loop is much larger.</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorial_edm/">« EDM4hep.jl EDM Tutorial</a><a class="docs-footer-nextpage" href="../../examples/analysis_mH_recoil/">FCCee Analysis Examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.0 on <span class="colophon-date" title="Friday 14 November 2025 18:35">Friday 14 November 2025</span>. Using Julia version 1.12.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
